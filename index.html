<!DOCTYPE html>
<html>
	<head>
		<title>Pong!</title>
	</head>
	<body>
	<div id = "main">
		<canvas id="gameCanvas" width="800" height="600" style="border:3px solid grey"></canvas>
		</div>
		<style>
		#main {
		text-align: center;
		}
		body {
		background-color: #e1e6ea;
		}
		</style>
		<script>
		//declaring main variables
		var ballX = 0;
		var ballY = 300;
		var ballSpeedX = 4;
		var ballSpeedY= 2;
		var rectX = 0;
		var rectY = 250;
		var playerX = 790;
		var playerY = 240;
		const playerYHeight = 100;
		var lives = 1000000;
		var timer = 0;
		var parameter1 = 0;
		var parameter2 = 0;
		var shadowX = 0;
		var shadowY = 0;
		var scoreAI = 0;
		var scorePlayer = 0;
		var scoreAIX = 385;
		var scorePlayerX = 410;
		var gameSpeed = 10;
		var snd1 = new Audio();
		snd1.src = "Bounce Bleep.mp3";
		var snd2 = new Audio();
		snd2.src = "Paddle Bleep.mp3";
		var snd3 = new Audio();
		snd3.src = "Death Bleep.mp3";
		var rectSpeed = 1.6;
		var mouseX;
		var mouseY;
		var playerYVar;
		var playerXVar;
		var AIXVar;
		var AIYVar;
	
		//onload function
			window.onload = function() {
				setInterval(draw, gameSpeed);
			}
		//calculating the mouse position
			function calculateMousePos(evt) {
				var rect = gameCanvas.getBoundingClientRect();
				var root = document.documentElement;
				var mouseX = evt.clientX - rect.left - root.scrollLeft;
				var mouseY = evt.clientY - rect.top - root.scrollTop;
			return {
				x:mouseX,
				y:mouseY
			};
		}
		
		//adding canvas listener event
				gameCanvas.addEventListener('mousemove',
				
		//event function
			function(evt) {
				var mousePos = calculateMousePos(evt);
				playerY = mousePos.y - 50;
				mouseX = mousePos.x;
				mouseY = mousePos.y;
			});
			
		//resetting the ball when needed
			function ballReset() {
				ballX = 0;
				ballY = 300;
				ballSpeedX = 4;
				ballSpeedY = Math.floor(Math.random() * ((2-1)+1) + 1);;
				lives = lives - 1;
				snd3.play();
			}
		//checking and resetting score X positions and game speed
			function scoreCheck() {
				if(scoreAI > 9) {
					scoreAIX = 375;
				}
				if(scoreAI > 99) {
					scoreAIX = 365;
				}
				if(scoreAI > 999) {
					scoreAIX = 355;
				}
				if(scorePlayer > 10 && scorePlayer < 30) {
					gameSpeed = 9;
				}
				if(scorePlayer > 30 && scorePlayer < 50) {
					gameSpeed = 7;
				}
				if(scorePlayer > 50 && scorePlayer < 70) {
					gameSpeed = 5;
				}
				if(scorePlayer > 70 && scorePlayer < 100) {
					gameSpeed = 3;
				}
				if(scorePlayer > 100) {
					gameSpeed = 1;
				}
				if(scorePlayer < 0) {
					scorePlayer = 0;
				}
			}
			
			//drawing most elements on the page
			function draw() {
				AIXVar = rectX;
				AIYVar = rectY + 50;
				playerYVar = playerY + 50;
				playerXVar = playerX;
				ballX = ballX + ballSpeedX;
				ballY = ballY + (ballSpeedY * 1.5);
				computerMovement();
				scoreCheck();
			
			//paddle deflection for player
			if(ballX > 798) {
				if(ballY > playerY && ballY < playerY + 100) {
				ballSpeedX = -4;
				ballSpeedY = (ballY - playerYVar) / 30;
				snd2.play();
				} else {
					ballReset();
					scoreAI = scoreAI + 1;
					scorePlayer = scorePlayer - 1;
				}
			}
			
			//paddle deflection for computer
			if(ballX < 2) {
				if(ballY > rectY && ballY < rectY + 100) {
				ballSpeedX = 4;
				ballSpeedY = (ballY - AIYVar) / 30;
				snd2.play();
				} else {
					ballReset();
					scorePlayer = scorePlayer + 1;
				}
			}
			
			//ball deflection off floor
			if(ballY > 598) {
				//ballSpeedY = ballSpeedY + 1;
				//ballSpeedY = -Math.floor((Math.random() * 2) + Math.floor((Math.random() * 2) + 1)); 
				ballSpeedY = -ballSpeedY;
				snd1.play();
			}
					
			//ball deflection off roof
			if(ballY < 2) {
				//ballSpeedY = ballSpeedY + 1;
				//ballSpeedY = (Math.random() * 2) + Math.floor((Math.random() * 2) + 1);
				ballSpeedY = -ballSpeedY;
				snd1.play();
			}
			
			//computer's movement
			function computerMovement() {
				var rectYcenter = rectY + 50;
				if(rectYcenter < ballY) {
					rectY = rectY + rectSpeed;
				} else if(rectYcenter > ballY){
					rectY = rectY + -rectSpeed;
				} 
			}
			
			//if(mouseX>10&&mouseX<70&&mouseY>10&&mouseY<25) {
			//ctx.fillStyle = "white";
			//ctx.fillRect(mouseX,mouseY,50,50);
			//}
			
			//drawing the canvas. Preparing other elements for canvas
			var c = document.getElementById("gameCanvas");
			var ctx = c.getContext("2d");
			
			//drawing the paddles, ball, score, background, and text onto canvas
			ctx.fillStyle = "black";
			ctx.fillRect(0,0,800,600);
			
			ctx.fillStyle = "white";
			ctx.fillRect(ballX,ballY,10,10);
			
			ctx.fillStyle = "white";
			ctx.fillRect(rectX,rectY,10,100);
			
			ctx.fillStyle = "white";
			ctx.fillRect(playerX,playerY,10,100);
			
			ctx.fillStyle = "white";
			ctx.font="30px Arial";
			ctx.fillText("|",400,30);
			ctx.font="20px Arial";
			ctx.fillText(scoreAI,scoreAIX,30);
			ctx.fillText(scorePlayer,scorePlayerX,30);
			
			ctx.fillStyle = "white";
			ctx.fillRect(rectX,rectY,10,100);
			
			/*ctx.fillStyle = "white";
			ctx.fillRect(10,10,60,15);
			ctx.fillStyle = "#bfc3c9";
			ctx.fillRect(13,13,44,9);
			ctx.fillStyle = "black";
			ctx.font="12px Arial";
			ctx.fillText("OPTIONS",13,22); */
		}
		
		</script>
	</body>
</html>
